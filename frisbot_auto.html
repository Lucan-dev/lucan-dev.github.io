<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="icon" href="./favicon_io/black_favicon.png">
    <link href="https://fonts.googleapis.com/css2?family=Nunito&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="./css/project_pages.css">
    <link rel="stylesheet" href="./css/global.css">
    <title>My portfolio</title>
</head>

<body>
    <div class="margin_wrapper">
        <div id="top">
            <a href="projects.html" class="back_button" title="Back">
                <img src="https://drive.google.com/uc?export=view&id=1f_SyYMsdHN9JEruxCneX9i715TIj4Hwy" alt="button">
            </a>
            <h1><span class="gradient_text">Frisbot Autonomous</span></h1>
        </div>

        <h2>Video of Practice Autonomous Skills</h2>

        <iframe src="https://www.youtube.com/embed/Nb1d4bbiFl4?si=fQhAnGQY5dHr36tu" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen class="youtube_embed"></iframe>

        <h2>PID Functions</h2>
        <p><b>When used for our robot,</b> a PID controller helps our drivetrain stop gradually as it reaches a target, instead of coming to a hard stop when reaching the point. This is necessary as robots have momentum that can only be gradually slowed down to a halt to maintain accuracy, without this the robot's momentum would cause it to overshoot the desired target.</p>

        <p>A <b>real world example</b> of where a PID controller is used, is in an oven. If it is set to a temperature of 150° Celcius. A simpler algorithm might turn the heat on then turn it off once the temperature reaches the desired 150°. However, this is likely cause the temperature to exceed the desired the target, because even when "off" the heating coils would still heat up the oven as they cool down. To fix this, a PID controller is used to gradually decrease the coil heat as the temperature reaches the target temperature.</p>

        <h3>Drive Forward & Reverse Function</h3>
        <pre><code>
void drive_forward(int motor_degrees, double heading, int max_rpm, int min_rpm, double adjust, double speed) {
    SetLeftDrivePos(0);
    SetRightDrivePos(0);
    
    double error;
    double output;
    double left_velocity;
    double right_velocity;
    double average_degrees_spun;
    double dist_to_go;
    
    motor_degrees = motor_degrees / 3 * 7;
    
    if (motor_degrees > 0) {
        // Forward 
        SpinDriveForward();
    
        while ((FrontLeft.position(degrees) + FrontRight.position(degrees )) / 2 < motor_degrees) {
        error = heading -  Inertial.rotation(degrees);
        output = error * adjust;
        average_degrees_spun = (FrontLeft.position(degrees) + FrontRight.position(degrees )) / 2;
        dist_to_go = (motor_degrees - average_degrees_spun);
    
        left_velocity = (dist_to_go * speed);
        right_velocity = (dist_to_go * speed);
    
        if (left_velocity > max_rpm) {
            left_velocity = max_rpm;
        } else if (left_velocity < min_rpm) {
            left_velocity = min_rpm;
        }
    
        if (right_velocity > max_rpm) {
            right_velocity = max_rpm;
        } else if (right_velocity < min_rpm) {
            right_velocity = min_rpm;
        }
    
        left_velocity = left_velocity + (left_velocity * output) / 550;
        right_velocity = right_velocity - (left_velocity * output) / 550;
    
        SetLeftDriveVelocity(left_velocity);
        SetRightDriveVelocity(right_velocity);
        }
    
    } else {
        // Backward
        SpinDriveForward();
    
        while ((FrontLeft.position(degrees) + FrontRight.position(degrees )) / 2 > motor_degrees) {
        error = heading -  Inertial.rotation(degrees);
        output = error * adjust;
        average_degrees_spun = (FrontLeft.position(degrees) + FrontRight.position(degrees )) / 2;
        dist_to_go = motor_degrees - average_degrees_spun;
    
        left_velocity = dist_to_go * -speed;
        right_velocity = dist_to_go * -speed;
    
        if (left_velocity > max_rpm) {
            left_velocity = max_rpm;
        } else if (left_velocity < min_rpm) {
            left_velocity = min_rpm;
        }
    
        if (right_velocity > max_rpm) {
            right_velocity = max_rpm;
        } else if (right_velocity < min_rpm) {
            right_velocity = min_rpm;
        }
    
        left_velocity = left_velocity + (left_velocity * output) / 550;
        right_velocity = right_velocity - (left_velocity * output) / 550;
    
        SetLeftDriveVelocity((left_velocity - output) * -1);
        SetRightDriveVelocity((right_velocity + output) * -1);
        }
    
    }
    
    StopDrive();
}
        </code></pre>

        <h3>Turn Left & Right Function</h3>
        <pre><code>
void turn_to_rotation(double TurnAngle, double Speed, int MaxRPM, double MinRPM) {
    // Turn Right
    fix_rotation();
    if (Inertial.rotation() < TurnAngle) {
        FrontLeft.spin(forward);
        BackLeftBottom.spin(forward);
        BackLeftTop.spin(forward);
    
        BackRightBottom.spin(forward);
        BackRightTop.spin(forward);
        FrontRight.spin(forward);
    
    
        while (Inertial.rotation() < TurnAngle ){
        int velocity = (TurnAngle - Inertial.rotation()) * Speed;
    
        if (velocity > MaxRPM) {
            velocity = MaxRPM;
    
        } else if (velocity < MinRPM) {
            velocity = MinRPM;
    
        }
    
        SetLeftDriveVelocity(velocity);
        SetRightDriveVelocity(velocity * -1);
        }
    
    } else {
        fix_rotation();
        // Turn Left
        SpinDriveForward();
    
        while(Inertial.rotation() > TurnAngle){
        int velocity = ((TurnAngle * -1) - (Inertial.rotation() * -1)) * Speed;
    
        if (velocity > MaxRPM) {
            velocity = MaxRPM;
    
        } else if (velocity < MinRPM) {
            velocity = MinRPM;
    
        }
    
        SetLeftDriveVelocity(velocity * -1);
        SetRightDriveVelocity(velocity);
        }
    }
    
    StopDrive();
}
        </code></pre>

    </div>
</body>
</html>